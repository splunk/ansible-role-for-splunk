---
- name: Linux - Install splunk.secret
  copy:
    src: "{{ splunk_secret_file }}"
    dest: "{{ splunk_home }}/etc/auth/splunk.secret"
    owner: "{{ splunk_nix_user }}"
    group: "{{ splunk_nix_group }}"
    mode: 0644
  become: true
  notify: restart splunk
  when:
    - splunk_configure_secret
    - ansible_system == "Linux"

- name: Windows - Install splunk.secret
  win_copy:
    src: "{{ splunk_secret_file }}"
    dest: "{{ splunk_home }}\\etc\\auth\\splunk.secret"
    owner: "{{ splunk_nix_user }}"
  notify: restart windows splunk
  when:
    - splunk_configure_secret
    - ansible_system == "Win32NT"
